{"version":3,"sources":["../../src/pages/complete-profile/complete-profile.module.ts","../../src/models/user.ts","../../src/pages/complete-profile/complete-profile.ts"],"names":[],"mappings":"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","file":"1.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CompleteProfilePage } from './complete-profile';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CompleteProfilePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(CompleteProfilePage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    CompleteProfilePage\r\n  ]\r\n})\r\nexport class CompleteProfileModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/complete-profile/complete-profile.module.ts","export class User {\r\n  constructor(\r\n    public userId: string,\r\n    public firstName: string,\r\n    public lastName: string,\r\n    public profilePic: string,\r\n    public email: string,\r\n    public phone: string,\r\n    public pushToken: string\r\n  ) { }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\r\nimport { AuthProvider, NetworkProvider, DatabaseProvider, LoadingProvider, StorageProvider, ToastProvider, TranslateProvider } from '../../providers';\r\nimport { User } from '../../models/user';\r\nimport * as firebase from 'firebase';\r\nimport { FormBuilder, FormGroup, Validators, ValidatorFn } from '@angular/forms';\r\nimport { Keyboard } from '@ionic-native/keyboard';\r\nimport { Camera } from '@ionic-native/camera';\r\nimport { AuthConfig } from '../../configs/auth-config';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-complete-profile',\r\n  templateUrl: 'complete-profile.html',\r\n})\r\nexport class CompleteProfilePage {\r\n  private user: User;\r\n  private profileForm: FormGroup;\r\n  private provider: string;\r\n  private nameValidator: ValidatorFn = Validators.compose([\r\n    Validators.required\r\n  ]);\r\n  private emailValidator: ValidatorFn = Validators.compose([\r\n    Validators.required,\r\n    Validators.email\r\n  ]);\r\n  private phoneValidator: ValidatorFn = Validators.compose([\r\n    Validators.required\r\n  ]);\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private auth: AuthProvider,\r\n    private network: NetworkProvider,\r\n    private database: DatabaseProvider,\r\n    private loading: LoadingProvider,\r\n    private storage: StorageProvider,\r\n    private toast: ToastProvider,\r\n    private translate: TranslateProvider,\r\n    private formBuilder: FormBuilder,\r\n    private keyboard: Keyboard,\r\n    private camera: Camera,\r\n    private actionSheetCtrl: ActionSheetController) {\r\n    this.profileForm = this.formBuilder.group({\r\n      firstName: ['', this.nameValidator],\r\n      lastName: ['', this.nameValidator],\r\n      email: ['', this.emailValidator],\r\n      phone: ['', this.phoneValidator]\r\n    });\r\n    let isTwitter = this.navParams.get('isTwitter');\r\n    if (!isTwitter) {\r\n      this.provider = '';\r\n      this.profileForm.get('email').disable();\r\n    } else {\r\n      this.provider = 'twitter.com';\r\n      this.profileForm.get('email').enable();\r\n    }\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.database.exists('users/' + this.user.userId).then(exists => {\r\n      if (!exists) {\r\n        this.storage.deleteProfilePic(this.user.userId, this.user.profilePic).then(() => {\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.auth.getUser().then((user: firebase.User) => {\r\n      let userId, firstName, lastName, profilePic, email, phone;\r\n\r\n      userId = user.uid;\r\n\r\n      let providerData = user.providerData[0];\r\n      if (providerData) {\r\n        if (providerData.displayName) {\r\n          if (providerData.displayName.indexOf(' ') > -1) {\r\n            firstName = providerData.displayName.substr(0, providerData.displayName.indexOf(' '));\r\n            lastName = providerData.displayName.substr(providerData.displayName.indexOf(' ') + 1, providerData.displayName.length);\r\n          }\r\n        } else {\r\n          firstName = providerData.displayName;\r\n          lastName = '';\r\n        }\r\n        email = providerData.email;\r\n        phone=providerData.phoneNumber;\r\n        if (providerData.photoURL) {\r\n          profilePic = providerData.photoURL;\r\n        } else {\r\n          profilePic = 'assets/images/profile.png';\r\n        }\r\n      } else {\r\n        if (user.displayName) {\r\n          if (user.displayName.indexOf(' ') > -1) {\r\n            firstName = user.displayName.substr(0, user.displayName.indexOf(' '));\r\n            lastName = user.displayName.substr(user.displayName.indexOf(' ') + 1, user.displayName.length);\r\n          }\r\n        } else {\r\n          firstName = user.displayName;\r\n          lastName = '';\r\n        }\r\n        email = user.email;\r\n        phone=user.phoneNumber;\r\n        if (user.photoURL) {\r\n          profilePic = user.photoURL;\r\n        } else {\r\n          profilePic = 'assets/images/profile.png';\r\n        }\r\n      }\r\n      //Create user object based on User model.\r\n      this.user = new User(userId, firstName, lastName, profilePic, email, phone, '');\r\n\r\n      this.profileForm.setValue({\r\n        firstName: firstName,\r\n        lastName: lastName,\r\n        email: email,\r\n        phone:phone\r\n      });\r\n    });\r\n  }\r\n\r\n  keyDownFunction(event) {\r\n    if (event.keyCode == 13) {\r\n      this.keyboard.close();\r\n      if (this.profileForm.valid)\r\n        this.completeProfile();\r\n    }\r\n  }\r\n\r\n  private completeProfile(): void {\r\n    this.loading.show();\r\n    this.user.firstName = this.profileForm.value['firstName'];\r\n    this.user.lastName = this.profileForm.value['lastName'];\r\n    this.user.phone = this.profileForm.value['phone'];\r\n    if (this.provider == 'twitter.com') {\r\n      this.auth.getTwitterCredential().then(credential => {\r\n        this.auth.getUser().then((user: firebase.User) => {\r\n          user.reauthenticateWithCredential(credential).then(() => {\r\n            user.updateEmail(this.profileForm.value['email']).then(res => {\r\n              this.user.email = this.profileForm.value['email'];\r\n              this.database.setUser(this.user).then(() => {\r\n                this.loading.hide();\r\n                if (AuthConfig.emailVerification) {\r\n                  this.navCtrl.setRoot('VerificationPage');\r\n                } else {\r\n                  this.navCtrl.setRoot('HomePage');\r\n                }\r\n              }).catch((error) => {\r\n              });\r\n            }).catch(err => {\r\n              let error: any = err;\r\n              this.toast.showError(error.code);\r\n              this.loading.hide();\r\n            });\r\n          });\r\n        });\r\n      });\r\n    } else {\r\n      this.database.setUser(this.user).then(() => {\r\n        this.loading.hide();\r\n        this.navCtrl.setRoot('HomePage');\r\n      }).catch((error) => {\r\n      });\r\n    }\r\n  }\r\n\r\n  private setProfilePic(): void {\r\n    this.actionSheetCtrl.create({\r\n      title: this.translate.get('SET_PROFILE_PICTURE'),\r\n      buttons: [\r\n        {\r\n          text: this.translate.get('TAKE_A_PHOTO'),\r\n          role: 'destructive',\r\n          handler: () => {\r\n            this.storage.uploadProfilePic(this.user.userId, this.camera.PictureSourceType.CAMERA).then(profilePic => {\r\n              this.storage.deleteProfilePic(this.user.userId, this.user.profilePic).then(() => {\r\n                this.user.profilePic = profilePic;\r\n              });\r\n            });\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.get('CHOOSE_FROM_GALLERY'),\r\n          handler: () => {\r\n            this.storage.uploadProfilePic(this.user.userId, this.camera.PictureSourceType.PHOTOLIBRARY).then(profilePic => {\r\n              this.storage.deleteProfilePic(this.user.userId, this.user.profilePic).then(() => {\r\n                this.user.profilePic = profilePic;\r\n              });\r\n            });\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.get('CANCEL'),\r\n          role: 'cancel',\r\n          handler: () => {\r\n          }\r\n        }\r\n      ]\r\n    }).present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/complete-profile/complete-profile.ts"],"sourceRoot":""}